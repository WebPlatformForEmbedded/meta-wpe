# Provides configurations for WPE DIALServer plugin
WPE_DIALSERVER_NAME ??= "MetroDIALServer"
WPE_DIALSERVER_MODEL ??= "Generic Platform"
WPE_DIALSERVER_MANUFACTURER ??= "Metrological"
WPE_DIALSERVER_DESCRIPTION ??= "Metrological DIAL Reference Server."
WPE_DIALSERVER_AUTOSTART ??= "true"
# Use device host name/ip
WPE_DIALSERVER_INTERFACE ??= "0.0.0.0"

# Configure YouTube mode active/passive
WPE_DIALSERVER_YOUTUBE_MODE ??= "passive"
WPE_DIALSERVER_YOUTUBE_CALLSIGN ??= "${@bb.utils.contains('WPE_DIALSERVER_YOUTUBE_MODE', 'active', 'Cobalt', '', d)}"
WPE_DIALSERVER_YOUTUBE_RUNTIMECHANGE ??= "true"

WPE_DIALSERVER_NETFLIX_MODE ??= "passive"
WPE_DIALSERVER_NETFLIX_CALLSIGN ??= "${@bb.utils.contains('WPE_DIALSERVER_NETFLIX_MODE', 'active', 'Netflix', '', d)}"
WPE_DIALSERVER_NETFLIX_RUNTIMECHANGE ??= "true"

WPE_DIALSERVER_EXTRAFLAGS = "\
    -DPLUGIN_DIALSERVER_NAME="${WPE_DIALSERVER_NAME}" \
    -DPLUGIN_DIALSERVER_MODEL="${WPE_DIALSERVER_MODEL}" \
    -DPLUGIN_DIALSERVER_MANUFACTURER="${WPE_DIALSERVER_MANUFACTURER}" \
    -DPLUGIN_DIALSERVER_DESCRIPTION="${WPE_DIALSERVER_DESCRIPTION}" \
    -DPLUGIN_DIALSERVER_INTERFACE="${WPE_DIALSERVER_INTERFACE}" \
    -DPLUGIN_DIALSERVER_AUTOSTART=${WPE_DIALSERVER_AUTOSTART} \
"

PACKAGECONFIG[dialserver] = "-DPLUGIN_DIALSERVER=ON ${WPE_DIALSERVER_EXTRAFLAGS},-DPLUGIN_DIALSERVER=OFF,,"
PACKAGECONFIG[dial_youtube] = "\
    -DPLUGIN_DIALSERVER_ENABLE_YOUTUBE=ON \
    -DPLUGIN_DIALSERVER_YOUTUBE_MODE=${WPE_DIALSERVER_YOUTUBE_MODE} \
    -DPLUGIN_DIALSERVER_YOUTUBE_CALLSIGN=${WPE_DIALSERVER_YOUTUBE_CALLSIGN} \
    -DPLUGIN_DIALSERVER_YOUTUBE_RUNTIMECHANGE=${WPE_DIALSERVER_YOUTUBE_RUNTIMECHANGE} \
    ,-DPLUGIN_DIALSERVER_ENABLE_YOUTUBE=OFF,, \
"

PACKAGECONFIG[dial_netflix] = "\
    -DPLUGIN_DIALSERVER_ENABLE_NETFLIX=ON \
    -DPLUGIN_DIALSERVER_NETFLIX_MODE=${WPE_DIALSERVER_NETFLIX_MODE} \
    -DPLUGIN_DIALSERVER_NETFLIX_CALLSIGN=${WPE_DIALSERVER_NETFLIX_CALLSIGN} \
    -DPLUGIN_DIALSERVER_NETFLIX_RUNTIMECHANGE=${WPE_DIALSERVER_NETFLIX_RUNTIMECHANGE} \
    , -DPLUGIN_DIALSERVER_ENABLE_NETFLIX=OFF,, \
"
