# Provides the WPE WebKitBrowser plugin settings for WPEFramwork
# Also extends WPE instances in the form of UX and a Apps specific instance

WEBKITBROWSER_AUTOSTART ?= "true"
WEBKITBROWSER_MEDIADISKCACHE ?= "false"
WEBKITBROWSER_MEMORYPRESSURE ?= "databaseprocess:50m,networkprocess:100m,webprocess:300m,rpcprocess:50m"
WEBKITBROWSER_MEMORYPROFILE ?= "128m"
WEBKITBROWSER_MSEBUFFERS ?= "audio:2m,video:15m,text:1m"
WEBKITBROWSER_STARTURL ?= "http://localhost:8080/index.html"
WEBKITBROWSER_USERAGENT ?= "Mozilla/5.0 (Macintosh, Intel Mac OS X 10_11_4) AppleWebKit/602.1.28+ (KHTML, like Gecko) Version/9.1 Safari/601.5.17"
WEBKITBROWSER_DISKCACHE ?= "0"
WEBKITBROWSER_XHRCACHE ?= "false"
WEBKITBROWSER_TRANSPARENT ?= "false"
WEBKITBROWSER_THREADEDPAINTING ?= "1"
WEBKITBROWSER_WEBINSPECTOR ?= "0.0.0.0:9998"

# Raspberry PI 3 has 4 cores, set to 4 for RPIs
WEBKITBROWSER_THREADEDPAINTING_rpi ?= "2"

# ----------------------------------------------------------------------------

PACKAGECONFIG[apps]           = "-DPLUGIN_WEBKITBROWSER_APPS=ON,-DPLUGIN_WEBKITBROWSER_APPS=OFF,"
PACKAGECONFIG[ux]             = "-DPLUGIN_WEBKITBROWSER_UX=ON,-DPLUGIN_WEBKITBROWSER_UX=OFF,"
PACKAGECONFIG[youtube]        = "-DPLUGIN_WEBKITBROWSER_YOUTUBE=ON,-DPLUGIN_WEBKITBROWSER_YOUTUBE=OFF,"
PACKAGECONFIG[webkitbrowser]  = "-DPLUGIN_WEBKITBROWSER=ON \
   -DPLUGIN_WEBKITBROWSER_AUTOSTART="${WEBKITBROWSER_AUTOSTART}" \
   -DPLUGIN_WEBKITBROWSER_MEDIADISKCACHE="${WEBKITBROWSER_MEDIADISKCACHE}" \
   -DPLUGIN_WEBKITBROWSER_MEMORYPRESSURE="${WEBKITBROWSER_MEMORYPRESSURE}" \
   -DPLUGIN_WEBKITBROWSER_MEMORYPROFILE="${WEBKITBROWSER_MEMORYPROFILE}" \
   -DPLUGIN_WEBKITBROWSER_MSEBUFFERS="${WEBKITBROWSER_MSEBUFFERS}" \
   -DPLUGIN_WEBKITBROWSER_STARTURL="${WEBKITBROWSER_STARTURL}" \
   -DPLUGIN_WEBKITBROWSER_USERAGENT="${WEBKITBROWSER_USERAGENT}" \
   -DPLUGIN_WEBKITBROWSER_DISKCACHE="${WEBKITBROWSER_DISKCACHE}" \
   -DPLUGIN_WEBKITBROWSER_XHRCACHE="${WEBKITBROWSER_XHRCACHE}" \
   -DPLUGIN_WEBKITBROWSER_TRANSPARENT="${WEBKITBROWSER_TRANSPARENT}" \
   -DPLUGIN_WEBKITBROWSER_THREADEDPAINTING="${WEBKITBROWSER_THREADEDPAINTING}" \
   -DPLUGIN_WEBKITBROWSER_WEBINSPECTOR_ADDRESS="${WEBKITBROWSER_WEBINSPECTOR}" \
   ,-DPLUGIN_WEBKITBROWSER=OFF,wpewebkit"

PACKAGECONFIG[aamp] = "-DPLUGIN_WEBKITBROWSER_AAMP=ON \
   -DPLUGIN_WEBKITBROWSER_AAMP_JSBINDINGS=ON \
   -DPLUGIN_AAMP_AUTOSTART="${PLUGIN_WEBKITBROWSER_AAMP_AUTOSTART}" \
   -DPLUGIN_AAMP_STARTURL="${PLUGIN_WEBKITBROWSER_AAMP_STARTURL}" \
   -DPLUGIN_AAMP_USERAGENT="${PLUGIN_WEBKITBROWSER_AAMP_USERAGENT}" \
   -DPLUGIN_AAMP_WEBINSPECTOR_ADDRESS="${PLUGIN_WEBKITBROWSER_AAMP_WEBINSPECTOR_ADDRESS}" \
   -DPLUGIN_AAMP_LOCALSTORAGE_ENABLE="${PLUGIN_WEBKITBROWSER_AAMP_LOCALSTORAGE_ENABLE}" \
   ,-DPLUGIN_WEBKITBROWSER_AAMP=OFF -DPLUGIN_WEBKITBROWSER_AAMP_JSBINDINGS=OFF,aamp"

# ----------------------------------------------------------------------------
